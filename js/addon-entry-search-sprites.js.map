{"version":3,"file":"js/addon-entry-search-sprites.js","sources":["webpack://GUI/./src/addons/addons/search-sprites/search-bar.css","webpack://GUI/./src/addons/addons/search-sprites/reset-icon.svg","webpack://GUI/./src/addons/addons/search-sprites/search-icon.svg","webpack://GUI/./src/addons/addons/search-sprites/_runtime_entry.js","webpack://GUI/./src/addons/addons/search-sprites/userscript.js"],"sourcesContent":["exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"[class*=\\\"sprite-selector_items-wrapper_\\\"] {\\n  padding-bottom: 4.75rem;\\n}\\n\\n.sa-search-sprites-container {\\n  position: absolute;\\n  z-index: 21; /* above workspace scrollbar in small stage mode */\\n  bottom: 0.75rem;\\n  display: flex;\\n  width: 2.75rem;\\n  height: 2.75rem;\\n  background-color: var(--looks-secondary);\\n  box-shadow: 0 0 0 4px var(--looks-transparent);\\n  border-radius: 1.375rem;\\n  transition:\\n    width 0.25s,\\n    background-color 0.25s,\\n    box-shadow 0.5s;\\n}\\n\\n[dir=\\\"ltr\\\"] .sa-search-sprites-container {\\n  right: 4.75rem;\\n}\\n\\n[dir=\\\"rtl\\\"] .sa-search-sprites-container {\\n  left: 4.75rem;\\n}\\n\\n.sa-search-sprites-container:hover,\\n.sa-search-sprites-container:focus-within,\\n.sa-search-sprites-container:not(.sa-search-sprites-empty) {\\n  width: max(12rem, calc(100% - 5.75rem));\\n  background-color: var(--input-background);\\n}\\n\\n.sa-search-sprites-container:focus-within {\\n  box-shadow: 0 0 0 6px var(--looks-transparent);\\n}\\n\\ninput.sa-search-sprites-box {\\n  width: 100%;\\n  height: 100%;\\n  box-sizing: border-box;\\n  padding: 0;\\n  padding-inline-start: 2.75rem; /* space for icon */\\n  background-color: transparent;\\n  border: 0px;\\n  border-radius: 1.375rem;\\n  outline: none;\\n  color: var(--text-primary);\\n  font-size: 0.875rem;\\n  transition: padding 0.25s;\\n}\\n\\n.sa-search-sprites-container:hover input.sa-search-sprites-box,\\n.sa-search-sprites-container:focus-within input.sa-search-sprites-box,\\n.sa-search-sprites-container:not(.sa-search-sprites-empty) input.sa-search-sprites-box {\\n  padding-inline-end: 2.75rem; /* space for reset button */\\n}\\n\\ninput.sa-search-sprites-box::placeholder {\\n  color: var(--text-primary);\\n  opacity: 0;\\n  transition: opacity 0.25s;\\n}\\n\\n.sa-search-sprites-container:hover input.sa-search-sprites-box::placeholder,\\n.sa-search-sprites-container:focus-within input.sa-search-sprites-box::placeholder,\\n.sa-search-sprites-container:not(.sa-search-sprites-empty) input.sa-search-sprites-box::placeholder {\\n  opacity: 0.5;\\n}\\n\\n.sa-search-sprites-icon {\\n  position: absolute;\\n  width: 2.75rem;\\n  height: 2.75rem;\\n  padding: 0.625rem;\\n  filter: brightness(0) invert(1);\\n  pointer-events: none;\\n}\\n\\n[dir=\\\"ltr\\\"] .sa-search-sprites-icon {\\n  left: 0;\\n}\\n\\n[dir=\\\"rtl\\\"] .sa-search-sprites-icon {\\n  right: 0;\\n}\\n\\n.sa-search-sprites-container:hover .sa-search-sprites-icon,\\n.sa-search-sprites-container:focus-within .sa-search-sprites-icon,\\n.sa-search-sprites-container:not(.sa-search-sprites-empty) .sa-search-sprites-icon {\\n  filter: none;\\n}\\n\\n.sa-search-sprites-reset {\\n  display: none;\\n  margin: 0;\\n  width: 2.75rem;\\n  height: 2.75rem;\\n  padding: 0;\\n  justify-content: center;\\n  align-items: center;\\n  background: none;\\n  border: none;\\n  border-radius: 50%;\\n  outline: none;\\n  cursor: pointer;\\n  position: absolute;\\n}\\n\\n[dir=\\\"ltr\\\"] .sa-search-sprites-reset {\\n  right: 0;\\n}\\n\\n[dir=\\\"rtl\\\"] .sa-search-sprites-reset {\\n  left: 0;\\n}\\n\\n.sa-search-sprites-box:not(:placeholder-shown) ~ .sa-search-sprites-reset {\\n  display: flex;\\n}\\n\\n.sa-search-sprites-reset img {\\n  width: 0.5rem;\\n  height: 0.5rem;\\n}\\n\\n.sa-search-sprites-reset:hover img {\\n  transform: scale(1.2);\\n}\\n\", \"\"]);\n\n// exports\n","export default \"data:image/svg+xml;base64,PHN2ZwogICB3aWR0aD0iOSIKICAgaGVpZ2h0PSI4IgogICB2ZXJzaW9uPSIxLjEiCiAgIGlkPSJzdmcxIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxkZWZzCiAgICAgaWQ9ImRlZnMxIiAvPgogIDxwYXRoCiAgICAgZmlsbD0ibm9uZSIKICAgICBzdHJva2U9IiM0Qzk3RkYiCiAgICAgc3Ryb2tlLXdpZHRoPSIyIgogICAgIGQ9Ik0gMSw3LjMzMyA3LjMzMywxIE0gMSwxIDcuMzMzLDcuMzMzIgogICAgIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIKICAgICBzdHJva2UtbGluZWpvaW49InJvdW5kIgogICAgIGlkPSJwYXRoMSIKICAgICBzdHlsZT0ic3Ryb2tlOiM1NzVlNzU7c3Ryb2tlLW9wYWNpdHk6MSIgLz4KPC9zdmc+Cg==\"","export default \"data:image/svg+xml;base64,PHN2ZwogICB3aWR0aD0iMjAiCiAgIGhlaWdodD0iMjAiCiAgIHZlcnNpb249IjEuMSIKICAgaWQ9InN2ZzEiCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGRlZnMKICAgICBpZD0iZGVmczEiIC8+CiAgPHBhdGgKICAgICBmaWxsPSIjODU1Q0Q2IgogICAgIGZpbGwtcnVsZT0iZXZlbm9kZCIKICAgICBkPSJtIDkuMDksNS4yODIgYSAzLjgxNiwzLjgxNiAwIDAgMSAzLjgwNCwzLjgwNiBjIDAsMi4xIC0xLjcyLDMuODA1IC0zLjgwNSwzLjgwNSBBIDMuODA3LDMuODA3IDAgMCAxIDUuMjg0LDkuMDg4IGMgMCwtMi4xIDEuNzA1LC0zLjgwNiAzLjgwNSwtMy44MDYgbSA3LjU3OSw5Ljc3MiAtMi4xMjIsLTIuMTIzIGMgLTAuMjQ1LC0wLjI0NiAtMC4yNzksLTAuNjIgLTAuMTExLC0wLjkyNSAwLjg1MiwtMS41NzkgMS4wNiwtMy41OTMgMC4xNDQsLTUuNTY4IGEgNS45NDksNS45NDkgMCAwIDAgLTMuODY3LC0zLjIyOSA2LjEwNCw2LjEwNCAwIDAgMCAtNy42MSw3LjAxNyBjIDAuNDAzLDIuMjIzIDIuMTAxLDQuMDkzIDQuMjczLDQuNzA4IGEgNi4wOCw2LjA4IDAgMCAwIDQuNjE3LC0wLjUgMC43NzgsMC43NzggMCAwIDEgMC45MjgsMC4xMSBsIDIuMTM2LDIuMTI0IGMgMC4yMTMsMC4yMjggMC41MDIsMC4zMzUgMC44MDcsMC4zMzUgMC4yODksMCAwLjU3OCwtMC4xMDcgMC44MDUsLTAuMzM1IGEgMS4xNDYsMS4xNDYgMCAwIDAgMCwtMS42MTQiCiAgICAgaWQ9InBhdGgxIgogICAgIHN0eWxlPSJmaWxsOiM1NzVlNzU7ZmlsbC1vcGFjaXR5OjEiIC8+Cjwvc3ZnPgo=\"","/* generated by pull.js */\nimport _js from \"./userscript.js\";\nimport _css from \"!css-loader!./search-bar.css\";\nimport _asset from \"!url-loader!./reset-icon.svg\";\nimport _asset2 from \"!url-loader!./search-icon.svg\";\nexport const resources = {\n  \"userscript.js\": _js,\n  \"search-bar.css\": _css,\n  \"reset-icon.svg\": _asset,\n  \"search-icon.svg\": _asset2,\n};\n","export default async function ({ addon, console, msg }) {\n  let spritesContainer;\n  let spriteSelectorContainer;\n\n  const container = document.createElement(\"div\");\n  container.className = \"sa-search-sprites-container sa-search-sprites-empty\";\n  addon.tab.displayNoneWhileDisabled(container);\n\n  const searchBox = document.createElement(\"input\");\n  searchBox.className = \"sa-search-sprites-box\";\n  searchBox.placeholder = msg(\"placeholder\");\n  searchBox.autocomplete = \"off\";\n  // search might make more sense, but browsers treat them special in ways that this addon does not handle,\n  // so just leave it as a text input. Also note that Scratch uses type=text for its own search inputs in\n  // the libraries, so this fits right in.\n  searchBox.type = \"text\";\n\n  const search = (query) => {\n    if (!spritesContainer) return;\n\n    query = query.toLowerCase();\n    const containsQuery = (str) => str.toLowerCase().includes(query);\n\n    for (const sprite of spritesContainer.children) {\n      const visible =\n        !query ||\n        containsQuery(sprite.children[0].children[1].innerText) ||\n        (containsQuery(sprite.children[0].children[2].children[0].innerText) &&\n          sprite.children[0].classList.contains(\"sa-folders-folder\"));\n      sprite.style.display = visible ? \"\" : \"none\";\n    }\n  };\n\n  searchBox.addEventListener(\"input\", (e) => {\n    container.classList.toggle(\"sa-search-sprites-empty\", !e.target.value);\n    search(e.target.value);\n  });\n\n  const searchIcon = document.createElement(\"img\");\n  searchIcon.className = \"sa-search-sprites-icon\";\n  searchIcon.src = addon.self.getResource(\"/search-icon.svg\") /* rewritten by pull.js */;\n  searchIcon.alt = \"\";\n  searchIcon.draggable = false;\n\n  const reset = () => {\n    search(\"\");\n    searchBox.value = \"\";\n    container.classList.add(\"sa-search-sprites-empty\");\n  };\n\n  const resetButton = document.createElement(\"button\");\n  resetButton.className = \"sa-search-sprites-reset\";\n  resetButton.addEventListener(\"click\", () => {\n    reset();\n    searchBox.focus();\n  });\n  addon.self.addEventListener(\"disabled\", reset);\n\n  const resetIcon = document.createElement(\"img\");\n  resetIcon.src = addon.self.getResource(\"/reset-icon.svg\") /* rewritten by pull.js */;\n  resetIcon.alt = msg(\"clear\");\n  resetIcon.draggable = false;\n  resetButton.appendChild(resetIcon);\n\n  container.appendChild(searchBox);\n  container.appendChild(searchIcon);\n  container.appendChild(resetButton);\n\n  while (true) {\n    await addon.tab.waitForElement(\"div[class^='sprite-selector_items-wrapper']\", {\n      markAsSeen: true,\n      reduxEvents: [\"scratch-gui/mode/SET_PLAYER\", \"fontsLoaded/SET_FONTS_LOADED\", \"scratch-gui/locales/SELECT_LOCALE\"],\n      reduxCondition: (state) => !state.scratchGui.mode.isPlayerOnly,\n    });\n\n    spritesContainer = document.querySelector('[class^=\"sprite-selector_items-wrapper\"]');\n    spriteSelectorContainer = document.querySelector('[class^=\"sprite-selector_sprite-selector\"]');\n    const addButton = document.querySelector('[class*=\"sprite-selector_add-button\"]');\n    spriteSelectorContainer.insertBefore(container, addButton);\n    reset(); // Clear search box after going outside then inside\n  }\n}\n"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACPA;AAAA;;;;;;;;;;;;ACAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACVA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AAKA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}